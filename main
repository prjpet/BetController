"""
main.py 
    Downloads the HTML of a website on the supplied URL
    
    If time is between 00:00 amd max_bet_time and odds for Over is > then min_odd_to_bet then place the bet
"""
from LoadOdds import LoadOdds
from Game import Game


if __name__ == "__main__":


    LoadOdds = LoadOdds()
    #1. PREPARE WEBSITE:
    # - Click through the correct links until on the correct page (Overview - Soccer)
    # missing: delay between interaction
    LoadOdds.locateElementByTextAndClick("English")
    LoadOdds.locateElementByTextAndClick("In-Play")

    #2. LOGIN

    #LoadOdds.locateUsernameAndPassword("input.hm-Login_InputField", "alexandra1188","indietro11")
    #LoadOdds.locateElementByCssAndClick("button.hm-Login_LoginBtn")


    #3. CLICK "Event View"
    LoadOdds.locateElementByXpathAndClick("//span/div[2]")

    # 4. LOAD GAME DATA:
    # missing: score, betOptions, nameOfOdds, odds
    teamList = LoadOdds.locateElementByClassAndLoad("ipn-TeamStack_Team")
    timeList = LoadOdds.locateElementByClassAndLoad("ipn-ScoreDisplayStandard_Timer")

    availableGames = []

    for i, item in enumerate(teamList[::2]):

        game = Game(teamList[i].text, teamList[i+1].text)
        availableGames.append(game)

        if i < len(timeList):
            game.setTime(timeList[i].text)



    for item in availableGames:
        item.toString()
"""
User Variables:
betOptions, EndTime, StartTime, MinValOdd, minDelay, MaxDelay

Game properties:
BetTRUE, Team1, team2, time, score, betOptions, (nameOfOdds, odds)

-1. DEFINE selected bet options - get proper string name into variable
0-load ALL GAMES
1-first game - Team1, team2, time, score, betOptions, (nameOfOdds, odds)
2 if score is different from 0:0 OR
    time is not in interval StartTime, EndTime OR
    the betOptions (1st half score or 2nd half score) doesn't exist THEN 
    click on next game 
3 else read the (nameOfOdds, odds) value for bet option
4.if odds values are bigger then MinValOdd(1.41) AND
BetTRUE=FALSE
then  BetTRUE - output the game + minute + score + odds value into a txt file

if score is different from 0:0 AND
betOptions is == 2nd half score AND
odds values are bigger then MinValOdd AND
betTRUE ==FALSE
then  BetTRUE - output the game + minute + score + odds value into a txt file

-UPDATE GAME LIST (what is the update frequency???)
-TRY TO ADD FINAL SCORE 

ADD ramdom delays in seconds between actions (minDelay and MaxDelay)
"""